# 概要設計（Dataview ベース・シンプル運用）

## 1. 全体アーキテクチャ概要

### 1.1 コンポーネント

- **Obsidian**
  - ノート閲覧・編集・索引確認すべての中心
  - Dataview プラグインで動的に索引を表示
  - バックリンク/グラフで関連発見
- **VS Code + GitHub Copilot**
  - AI 支援で日次ノートを効率的に作成
  - 規約文書（タグ体系）を参照させて出力の一貫性を担保
- **Vault（Markdown）**
  - 一次情報（日次ノート・ブログ下書き）を保持する"正"
- **Dataview プラグイン**
  - Markdown のセクション・タグを動的にクエリして一覧表示
  - スクリプト不要で索引化を実現

### 1.2 データの流れ（概要）

1. ユーザーが自然文入力 → **AI が Daily Note を生成**
2. Daily Note を保存 → **Dataview が自動で索引を更新**
3. Obsidian で索引ページを開く → **動的に一覧表示**

### 1.3 オンボーディング

- Obsidian + Dataview プラグインをインストール
- テンプレートを使って Daily Note を作成
- 索引ページを開いて一覧を確認
- 所要時間：約 10 分

---

## 2. ディレクトリ設計（Vault 内）

```
vault/
  00.daily/              # 日次ノート（YYYY-MM-DD.md）
    Templates/           # テンプレート
  01.index/              # 索引ページ（Dataview クエリ）
  02.blog/
    drafts/              # ブログ下書き
    published/           # 公開済み記事
  03.ideas/              # アイディア詳細ページ
    Templates/
  99.system/
    docs/                # 設計・ガイド
      tag-taxonomy.md    # タグ体系
    taxonomy/
      tags.yml           # タグ辞書（レガシー参照用）
```

---

## 3. Daily Note 設計（セクションベース）

### 3.1 Daily Note の構成

- **Frontmatter**：date のみ（シンプル）
- **Summary**：今日のハイライト（1 行）
- **Learnings**：学んだこと（リスト形式、タグ付き）
- **Ideas**：思いついたこと（リスト形式、タグ付き）
- **Actions**：次にやること（チェックボックス形式）
- **Experiments**：試したこと（リスト形式）
- **Notes**：詳細メモ（自由記述）

### 3.2 セクションと Dataview の対応

- Dataview は `meta(L.section).subpath` でセクションを判定
- 各セクションから該当項目を抽出して索引ページに表示

### 3.3 タグの使い方

- セクション内の各行に `#tag` を付与
- Dataview クエリでタグ絞り込みが可能
- タグは標準タグリスト（tag-taxonomy.md）から選定

---

## 4. タグ設計（tag-taxonomy.md）

### 4.1 タグ形式

- シンプル形式：`#value`（例：`#ai`、`#playwright`）
- prefix 不要でフラットに管理

### 4.2 標準タグカテゴリ（約 20 種類）

| カテゴリ | タグ例 |
|---------|--------|
| AI・自動化 | #ai, #playwright, #cli |
| 技術・ツール | #ruby, #rails, #python, #git |
| 学習 | #reading, #course |
| テーマ | #productivity, #workflow, #testing |
| アウトプット | #blog, #talk |
| コンテキスト | #work, #personal, #event |

### 4.3 タグ運用ルール

- 既存タグから選定することを優先
- 新しいタグが必要な場合は tag-taxonomy.md に追加してから使用
- 類似タグの統合は週次/月次で実施

---

## 5. Dataview クエリ設計

### 5.1 索引ページ構成

| ページ | 抽出対象 |
|--------|----------|
| dashboard.md | 全体概要・統計 |
| learnings.md | Learnings セクションのリスト項目 |
| ideas.md | Ideas セクションのリスト項目 |
| actions.md | Actions セクションのチェックボックス |
| experiments.md | Experiments セクションのリスト項目 |

### 5.2 Dataview クエリの基本パターン

```dataview
LIST L.text
FROM "00.daily"
WHERE !contains(file.path, "Templates")
FLATTEN file.lists AS L
WHERE meta(L.section).subpath = "Learnings"
SORT file.name DESC
```

### 5.3 タグ絞り込みパターン

```dataview
LIST L.text
FROM "00.daily"
WHERE !contains(file.path, "Templates")
FLATTEN file.lists AS L
WHERE meta(L.section).subpath = "Ideas"
WHERE contains(L.text, "#ai")
SORT file.name DESC
```

### 5.4 未完了アクション抽出

```dataview
TASK
FROM "00.daily"
WHERE !completed
WHERE !contains(file.path, "Templates")
SORT file.name DESC
```

---

## 6. 運用フロー

### 6.1 日次（毎日）

1. VS Code で自然文を書く
2. AI で Daily Note をテンプレに沿って生成
3. Obsidian で保存 → 索引が自動更新

### 6.2 索引確認

- Obsidian で `01.index/` を開く
- Dataview が動的に一覧を表示
- タグパネルで分類別にアクセス

### 6.3 ブログ化（任意）

1. ideas/learnings から記事ネタを発見
2. タグで関連する学びを集約
3. drafts/ にブログ下書きを作成

---

## 7. AI 向け規約

- Daily Note のセクション構成を守る
- タグは標準タグリスト（tag-taxonomy.md）から選定
- Actions はチェックボックス形式（`- [ ]`）
- 詳細は `5.ai-instructions.md` を参照
